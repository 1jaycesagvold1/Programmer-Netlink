<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>Programmer Netlink</title>
</head>
<body>

  <div class="tab-bar">
    <a href="http://127.0.0.1:5500/profile/profile.html"><b>Home</b></a>
    <a href="http://127.0.0.1:5500/profile/snippits/user-snippts.html"><b>Snippits</b></a>
  </div>

    <div class="user-post-header">
        <h2>Snippits <span id="user-name"></span></h2>
        <p>Snippits are like 'posts'.</p>
      </div>
    
    <div id="posts-container">
        <div id="no-posts-message"></div>
      </div>
    
    
    <script>
      const postsContainer = document.getElementById('posts-container');
      const noPostsMessage = document.getElementById('no-posts-message');
      const userName = document.getElementById('user-name');
    
      // Check if name exists in local storage
      let name = localStorage.getItem('name');
      if (!name) {
        // If not, prompt the user for their name and store it in local storage
        name = prompt('Please enter your name:');
        localStorage.setItem('name', name);
      }
    
      // Update the page title to include the user's name
      document.title = `${name}'s S`;
      userName.textContent = name;
    
      // Load existing posts from local storage
      const savedPosts = JSON.parse(localStorage.getItem('posts')) || [];
    
      // Render existing posts
      if (savedPosts.length > 0) {
        savedPosts.forEach(post => {
          const postElement = document.createElement('div');
          postElement.classList.add('post');
          postElement.innerHTML = `<h2>${post.title}</h2><p>${post.body}</p>`;

          postsContainer.appendChild(postElement);
        });
      } else {
        noPostsMessage.textContent = 'This Contributor has not created any Snippits.';
        console.error('ERROR 404: This Contributor has not created any Snippits. NON SERVER ERROR, USER ERROR');
      }
    
      // Add new post and save to local storage
      const form = document.querySelector('form');
      if (form) {
        form.addEventListener('submit', (event) => {
          event.preventDefault();
    
          // Get the input values
          const title = document.getElementById('post-title').value.trim();
          const body = document.getElementById('post-body').value.trim();
    
          // Create a new post object
          const post = {
            title,
            // name,
            body,
          };
    
          // Create a new post element
          const postElement = document.createElement('div');
          postElement.classList.add('post');
          postElement.innerHTML = `<h2>${title}</h2><p>${body}</p>`;
    
          // Add the new post to the list
          postsContainer.insertBefore(postElement, postsContainer.firstChild);
    
          // Save the new post to local storage
          savedPosts.unshift(post);
          localStorage.setItem('posts', JSON.stringify(savedPosts));
    
          // Reset the form
          form.reset();
        });
      }
    
    </script>
    
    
</body>
</html>
